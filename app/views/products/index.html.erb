<h1>All Products</h1>
<% @products.each do |product| %>
	<h3><%= product.name %></h3>
	<div id="product-<%= product.id %>"><%= truncate product.description %></div>
	<button class="js-more" data-id="<%= product.id %>">More Info</button>
<% end %>

<script type="text/javascript" charset="utf-8">
	$(function () {
	  $(".js-more").on('click', function() {
	    let id = $(this).data("id");

	    $.get("/products/" + id + "/description", function(description) {
	    	$.get("/products/" + id + "/inventory", function(inv) {
	    		if (inv === "true") {
	    			$("#product-" + id).text(description + " - Available")
	    		} else {
	    			$("#product-" + id).text(description + " - Sold Out")
	    		}
	    	});
	    });

	    // $.get("/products/" + id + "/inventory", function(data) {
	    // 	if (data === "true") {
	    // 		$.get("/products/" + id + "/description", function(data) {
			  //     $("#body-" + id).text(data + " - Available");
			  //   });
	    // 	} else {
	    // 		$.get("/products/" + id + "/description", function(data) {
			  //     $("#body-" + id).text(data + " - Sold Out");
			  //   });
	    // 	} 
	    // });
	  });
	});
</script>

